---
import Layout from '../../layouts/Layout.astro';
import ChatAgente from '../../components/ChatAgente.jsx';
import { grupos } from '../../data/infoGrupos';

// 1. Esta función le dice a Astro qué páginas existen basándose en nuestro archivo de datos
export function getStaticPaths() {
  return grupos.map((grupo) => ({
    params: { id: grupo.id },
    props: { grupo }, // Pasamos todos los datos del grupo a la página
  }));
}

// 2. Recibimos los datos del grupo actual
const { grupo } = Astro.props;
---

<Layout title={`Chat con ${grupo.nombre}`}>
  <main class="min-h-screen bg-slate-950 flex flex-col items-center justify-center p-4">
    
    <div class="mb-6 text-center">
      <h1 class="text-3xl font-bold text-white mb-2">{grupo.nombre}</h1>
      <p class="text-gray-400">{grupo.descripcion}</p>
    </div>

    {/* 3. Aquí usamos el componente y le inyectamos SU webhook específico */}
    <ChatAgente 
      client:load 
      webhookUrl={grupo.webhookUrl} 
      nombreAgente={grupo.nombre} 
    />

  </main>
</Layout>
